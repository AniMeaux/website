@import url("https://fonts.googleapis.com/css?family=Roboto:300,400,400i,500,600,700&display=swap");
@import url("https://fonts.googleapis.com/css?family=Open+Sans:300,400,400i,500,600,700&display=swap");
@import url("react-toastify/dist/ReactToastify.css");

@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  *,
  *::before,
  *::after {
    /* Disable bark background on link/button on tap. */
    -webkit-tap-highlight-color: transparent;

    /* Disable callout menu on tap and hold on link/button. */
    /* https://medium.com/appscope/designing-native-like-progressive-web-apps-for-ios-1b3cdda1d0e8 */
    -webkit-touch-callout: none;
  }
}

@layer components {
  .a11y-focus:focus {
    @apply outline-none;
  }

  .a11y-focus:focus-visible,
  .a11y-focus.focus-visible {
    @apply outline;
  }

  .animation-progress-bar {
    @apply text-blue-500;
    height: 2px;
    display: block;
    background-clip: padding-box;
    overflow: hidden;
  }

  @keyframes progress-bar-long {
    0% {
      left: -35%;
      right: 100%;
    }

    60% {
      left: 100%;
      right: -90%;
    }

    100% {
      left: 100%;
      right: -90%;
    }
  }

  .animation-progress-bar::before {
    content: "";
    background-color: currentColor;
    position: absolute;
    top: 0;
    left: 0;
    bottom: 0;
    animation: progress-bar-long 2s cubic-bezier(0.65, 0.815, 0.735, 0.395)
      infinite;
  }

  @keyframes progress-bar-short {
    0% {
      left: -200%;
      right: 100%;
    }

    60% {
      left: 107%;
      right: -8%;
    }

    100% {
      left: 107%;
      right: -8%;
    }
  }

  .animation-progress-bar::after {
    content: "";
    background-color: currentColor;
    position: absolute;
    top: 0;
    left: 0;
    bottom: 0;
    animation: progress-bar-short 2s cubic-bezier(0.165, 0.84, 0.44, 1) infinite;
    animation-delay: 1.15s;
  }

  @keyframes placeholder-pulse {
    0% {
      background-position: -1000px 0;
    }

    100% {
      background-position: 1000px 0;
    }
  }

  .placeholder {
    @apply relative inline-flex items-center;
  }

  .placeholder::before {
    /* Display some text to make sure to have the correct height when it is
     * set to "auto". */
    content: ".";
    opacity: 0;
  }

  .placeholder::after {
    @apply absolute w-full inline-block rounded;
    content: "";
    height: 70%;
    background: linear-gradient(
      to right,
      rgba(237, 237, 237, 0.2),
      rgba(129, 129, 129, 0.2) 50%,
      rgba(237, 237, 237, 0.2)
    );
    background-size: 1000px auto;
    animation-duration: 3s;
    animation-fill-mode: forwards;
    animation-iteration-count: infinite;
    animation-name: placeholder-pulse;
    animation-timing-function: linear;
  }

  .placeholder-avatar {
    @apply w-12 h-12;
  }

  .placeholder-avatar-small {
    @apply w-10 h-10;
  }

  .placeholder-avatar-xsmall {
    @apply w-8 h-8;
  }

  .placeholder-avatar::after,
  .placeholder-avatar-small::after,
  .placeholder-avatar-xsmall::after {
    @apply h-full rounded-full;
  }

  .placeholder-button {
    @apply min-w-button h-10;
  }

  .placeholder-checkbox {
    @apply w-4 h-4;
  }

  .placeholder-checkbox::after {
    @apply h-full;
  }

  .placeholder-checkbox-input {
    @apply w-1/2 h-10;
  }

  .placeholder-icon {
    width: 1em;
    height: 1em;
  }

  .placeholder-icon::after {
    @apply h-full rounded-full;
  }

  .placeholder-input {
    @apply w-full h-10;
  }

  .placeholder-input-small {
    @apply w-full h-8;
  }

  .placeholder-label {
    @apply w-3/12;
  }

  .placeholder-selector {
    @apply w-full h-full;
  }

  .placeholder-selector::after {
    @apply rounded-xl;
    /* Same as height to make it square. */
    width: 70%;
    /* To center it: (100% - 70%) / 2 = 15% */
    left: 15%;
  }

  .placeholder-text {
    @apply w-9/12;
  }

  .placeholder-tag {
    @apply w-20 h-8;
  }

  .placeholder-tag::after {
    @apply rounded-full;
  }

  .safe-area-px {
    padding-left: 0;
    padding-left: env(safe-area-inset-left, 0);
    padding-right: 0;
    padding-right: env(safe-area-inset-right, 0);
  }

  .navigation-pb {
    padding-bottom: 0;
    padding-bottom: env(safe-area-inset-bottom, 0);
  }

  .snackbar-bottom {
    bottom: theme("padding.14");
    bottom: calc(theme("padding.14") + env(safe-area-inset-bottom, 0));
  }

  .main-pb {
    padding-bottom: 0;
    padding-bottom: env(safe-area-inset-bottom, 0);
  }

  .main-pb-with-navigation {
    padding-bottom: theme("height.14");
    padding-bottom: calc(theme("height.14") + env(safe-area-inset-bottom, 0));
  }

  .step-item-line-width {
    width: calc(theme("width.full") - theme("width.8"));
  }

  .selectors-grid {
    @apply grid gap-2;
    grid-template-columns: repeat(auto-fill, minmax(theme("width.20"), 1fr));
    grid-auto-rows: 1fr;
  }

  .selectors-grid::before {
    content: "";
    width: 0;
    padding-bottom: 100%;
    grid-row: 1 / 1;
    grid-column: 1 / 1;
  }

  .selectors-grid > *:first-child {
    grid-row: 1 / 1;
    grid-column: 1 / 1;
  }

  .selector-input {
    top: -1px;
    left: -1px;
    width: calc(theme("width.full") + 2px);
    height: calc(theme("height.full") + 2px);
  }

  .quick-action-bottom {
    bottom: theme("inset.18");
    bottom: calc(theme("inset.18") + env(safe-area-inset-bottom, 0));
  }

  .quick-action-right {
    right: theme("inset.4");
    right: calc(theme("inset.4") + env(safe-area-inset-right, 0));
  }

  .modal-padding {
    padding-top: theme("padding.2");
    padding-top: calc(theme("padding.2") + env(safe-area-inset-top, 0));
    padding-right: theme("padding.2");
    padding-right: calc(theme("padding.2") + env(safe-area-inset-right, 0));
    padding-bottom: theme("padding.2");
    padding-bottom: calc(theme("padding.2") + env(safe-area-inset-bottom, 0));
    padding-left: theme("padding.2");
    padding-left: calc(theme("padding.2") + env(safe-area-inset-left, 0));
  }

  .modal-top-full-screen {
    top: theme("inset.2");
    top: calc(theme("inset.2") + env(safe-area-inset-top, 0));
  }

  .modal-content-padding {
    padding-top: 0;
    padding-top: env(safe-area-inset-top, 0);
    padding-right: 0;
    padding-right: env(safe-area-inset-right, 0);
    padding-bottom: 0;
    padding-bottom: env(safe-area-inset-bottom, 0);
    padding-left: 0;
    padding-left: env(safe-area-inset-left, 0);
  }

  .animate-fade-in {
    animation: fade-in theme("transitionDuration.200")
      theme("transitionTimingFunction.out") forwards;
  }

  @keyframes fade-in {
    0% {
      opacity: 0;
    }

    100% {
      opacity: 1;
    }
  }

  .animate-fade-out {
    animation: fade-out theme("transitionDuration.200")
      theme("transitionTimingFunction.in") forwards;
  }

  @keyframes fade-out {
    0% {
      opacity: 1;
    }

    100% {
      opacity: 0;
    }
  }

  .animate-bottom-slide-in {
    animation: bottom-slide-in theme("transitionDuration.200")
      theme("transitionTimingFunction.out") forwards;
  }

  @keyframes bottom-slide-in {
    0% {
      transform: translateY(100%);
    }

    100% {
      transform: translateY(0);
    }
  }

  .animate-bottom-slide-out {
    animation: bottom-slide-out theme("transitionDuration.200")
      theme("transitionTimingFunction.in") forwards;
  }

  @keyframes bottom-slide-out {
    0% {
      transform: translateY(0);
    }

    100% {
      transform: translateY(100%);
    }
  }
}

@layer utilities {
  @variants focus-visible {
    .outline {
      /* Default tailwind outline */
      /* See https://github.com/tailwindlabs/tailwindcss/blob/2b0b306a77cc0f34cd25054a0d661a18278786bc/src/plugins/css/preflight.css#L37 */
      outline: 1px dotted;
      outline: 5px auto -webkit-focus-ring-color;
    }
  }
}
